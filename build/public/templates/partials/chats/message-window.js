!function(s){"object"==typeof module&&module.exports?module.exports=s():"function"==typeof define&&define.amd&&define(s)}(function(){function a(t,n,i,s,e){return i(n&&n.roomId)?'\n<div component="chat/messages" data-roomid="'+t.__escape(i(n&&n.roomId))+'">\n    <div class="listview lv-message">\n        <div component="chat/header" class="lv-header-alt clearfix">\n            <div id="ms-menu-trigger">\n                <div class="line-wrap">\n                    <div class="line top"></div>\n                    <div class="line center"></div>\n                    <div class="line bottom"></div>\n                </div>\n            </div>\n\n            <ul class="lv-actions actions">\n                <li class="dropdown">\n                    <span data-toggle="dropdown" component="chat/controlsToggle" aria-expanded="true"><i class="fa fa-cog"></i></span>\n                    <ul class="dropdown-menu dropdown-menu-right pull-right" component="chat/controls">\n        \t\t\t\t'+(i(n&&n.users&&n.users.length)?'\n        \t\t\t\t<li class="dropdown-header">[[modules:chat.in-room]]</li>\n        \t\t\t\t'+s(i(n&&n.users),function(s,e,a){return'\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="'+t.__escape(i(n&&n.config&&n.config.relative_path))+"/uid/"+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s].uid))+'">\n        \t\t\t\t\t\t'+(i(n&&n.users&&n.users[s]&&n.users[s].picture)?'\n        \t\t\t\t\t\t<img class="avatar avatar-sm" component="user/picture" src="'+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s].picture))+'" itemprop="image" />\n        \t\t\t\t\t\t':'\n        \t\t\t\t\t\t<div class="avatar avatar-sm" component="user/picture" style="background-color: '+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s]["icon:bgColor"]))+';">'+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s]["icon:text"]))+"</div>")+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s].username))+"\n        \t\t\t\t\t</a>\n        \t\t\t\t</li>\n        \t\t\t\t"})+'\n        \t\t\t\t<li role="separator" class="divider"></li>\n        \t\t\t\t':"")+'\n        \t\t\t\t<li class="dropdown-header">[[modules:chat.options]]</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="members"><i class="fa fa-fw fa-cog"></i> [[modules:chat.manage-room]]</a>\n        \t\t\t\t</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="rename"><i class="fa fa-fw fa-edit"></i> [[modules:chat.rename-room]]</a>\n        \t\t\t\t</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="leave"><i class="fa fa-fw fa-sign-out"></i> [[modules:chat.leave]]</a>\n        \t\t\t\t</li>\n        \t\t\t</ul>\n                </li>\n                <li data-action="pop-out">\n                    <i class="fa fa-compress"></i>\n                </li>\n            </ul>\n\n            <span class="members">\n    \t\t\t[[modules:chat.chatting_with]]:\n    \t\t\t'+a.blocks.users(t,n,i,s,e)+'\n    \t\t</span>\n        </div>\n\n        <ul class="lv-body chat-content">\n            '+a.blocks.messages(t,n,i,s,e)+'\n        </ul>\n\n        <div component="chat/composer" class="lv-footer ms-reply">\n            <textarea component="chat/input" placeholder="[[modules:chat.placeholder]]" class="chat-input" '+(i(n&&n.canReply)?"":"readonly")+'></textarea>\n            <button data-action="send" '+(i(n&&n.canReply)?"":"disabled")+'><i class="fa fa-send"></i></button>\n            <span component="chat/message/remaining">'+t.__escape(i(n&&n.maximumChatMessageLength))+"</span>\n        </div>\n    </div>\n</div>\n":'\n<div>\n    <div class="listview lv-message">\n        <div class="lv-header-alt clearfix">\n            <div id="ms-menu-trigger" class="">\n                <div class="line-wrap">\n                    <div class="line top"></div>\n                    <div class="line center"></div>\n                    <div class="line bottom"></div>\n                </div>\n            </div>\n        </div>\n        <ul class="lv-body chat-content">\n        <div class="alert alert-info">\n            [[modules:chat.no-messages]]\n        </div>\n        </ul>\n    </div>\n</div>\n'}return a.blocks={messages:function(t,n,i,s,e){return s(i(n&&n.messages),function(s,e,a){return'\n<li component="chat/message" class="lv-item media'+(i(n&&n.messages&&n.messages[s]&&n.messages[s].self)?" right":"")+'" data-index="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].index))+'" data-mid="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].messageId))+'" data-uid="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].fromuid))+'" data-self="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].self))+'" data-break="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].newSet))+'" data-timestamp="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].timestamp))+'">\n    <div class="lv-avatar '+(i(n&&n.messages&&n.messages[s]&&n.messages[s].self)?"pull-right":"pull-left")+'">\n        '+(i(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser.picture)?'\n        <img class="user-avatar" src="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser.picture))+'">\n        ':'\n        <div class="user-icon" style="background-color: '+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser["icon:bgColor"]))+';">'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser["icon:text"]))+"</div>\n        ")+"\n    </div>\n    "+(i(n&&n.messages&&n.messages[s]&&n.messages[s].newSet)?'\n    <div><small class="ms-date"><i class="fa fa-clock-o"></i> <span class="chat-timestamp timeago" title="'+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].timestampISO))+'"></span></small></div>\n    ':"")+'\n    <div class="media-body">\n        <div component="chat/message/body" class="ms-item">\n            '+(i(n&&n.messages&&n.messages[s]&&n.messages[s].edited)?'\n            <small class="text-muted chat-edit" title="[[global:edited]] '+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].editedISO))+'"><i class="fa fa-edit"></i></span></small>\n            ':"")+"\n\n            "+(i(n&&n.config&&n.config.disableChatMessageEditing)?"":"\n            "+(i(n&&n.messages&&n.messages[s]&&n.messages[s].self)?'\n            <div class="chat-controls">\n                <button class="btn btn-xs btn-link" data-action="edit"><i class="fa fa-pencil"></i></button>\n                <button class="btn btn-xs btn-link" data-action="delete"><i class="fa fa-times"></i></button>\n            </div>\n            ':"")+"\n            ")+"\n            "+t.__escape(i(n&&n.messages&&n.messages[s]&&n.messages[s].content))+"\n        </div>\n    </div>\n</li>\n"})},users:function(t,n,i,s,e){return s(i(n&&n.users),function(s,e,a){return'\n    \t\t\t<a href="'+t.__escape(i(n&&n.config&&n.config.relative_path))+"/uid/"+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s].uid))+'">'+t.__escape(i(n&&n.users&&n.users[s]&&n.users[s].username))+"</a>"+(e!==a-1?",":"")+"\n    \t\t\t"})}},a});