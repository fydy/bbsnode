!function(s){"object"==typeof module&&module.exports?module.exports=s():"function"==typeof define&&define.amd&&define(s)}(function(){function t(a,n,o,s,e){return'<div class="chats chats-full">\n    '+(o(n&&n.breadcrumbs&&n.breadcrumbs.length)?'\n<ol class="breadcrumb">\n\t'+t.blocks.breadcrumbs(a,n,o,s,e)+"\n</ol>\n":"")+'\n    <div class="card chat-card" id="messages-main">\n        <div component="chat/nav-wrapper" data-loaded="'+(o(n&&n.roomId)?"1":"0")+'" class="ms-menu">\n            <div class="listview lv-message hidden-xs">\n                <div class="lv-header-alt clearfix">\n                    <div class="new-chat pull-left" title="New Chat">\n                        <i class="fa fa-comments-o"></i>\n                    </div>\n                </div>\n            </div>\n            <ul component="chat/recent" class="listview lv-user chats-list">\n                '+t.blocks.rooms(a,n,o,s,e)+'\n            </ul>\n        </div>\n         <div class="chat-search-menu">\n            <div class="listview lv-message">\n                <div class="lv-header-alt clearfix">\n                    <div id="chat-search-menu-trigger">\n                        <div class="line-wrap">\n                            <div class="line top"></div>\n                            <div class="line center"></div>\n                            <div class="line bottom"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="form-group">\n     \t\t\t<div class="fg-line">\n     \t\t\t\t<input class="form-control" component="chat/search" type="text" placeholder="[[users:enter_username]]"/>\n     \t\t\t</div>\n     \t\t</div>\n            <ul component="chat/search/list" class="chat-search-list">\n\n    \t\t</ul>\n    \t</div>\n\n        <div class="ms-body expanded-chat" component="chat/main-wrapper">\n            '+(o(n&&n.roomId)?'\n<div component="chat/messages" data-roomid="'+a.__escape(o(n&&n.roomId))+'">\n    <div class="listview lv-message">\n        <div component="chat/header" class="lv-header-alt clearfix">\n            <div id="ms-menu-trigger">\n                <div class="line-wrap">\n                    <div class="line top"></div>\n                    <div class="line center"></div>\n                    <div class="line bottom"></div>\n                </div>\n            </div>\n\n            <ul class="lv-actions actions">\n                <li class="dropdown">\n                    <span data-toggle="dropdown" component="chat/controlsToggle" aria-expanded="true"><i class="fa fa-cog"></i></span>\n                    <ul class="dropdown-menu dropdown-menu-right pull-right" component="chat/controls">\n        \t\t\t\t'+(o(n&&n.users&&n.users.length)?'\n        \t\t\t\t<li class="dropdown-header">[[modules:chat.in-room]]</li>\n        \t\t\t\t'+s(o(n&&n.users),function(s,e,t){return'\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="'+a.__escape(o(n&&n.config&&n.config.relative_path))+"/uid/"+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s].uid))+'">\n        \t\t\t\t\t\t'+(o(n&&n.users&&n.users[s]&&n.users[s].picture)?'\n        \t\t\t\t\t\t<img class="avatar avatar-sm" component="user/picture" src="'+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s].picture))+'" itemprop="image" />\n        \t\t\t\t\t\t':'\n        \t\t\t\t\t\t<div class="avatar avatar-sm" component="user/picture" style="background-color: '+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s]["icon:bgColor"]))+';">'+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s]["icon:text"]))+"</div>")+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s].username))+"\n        \t\t\t\t\t</a>\n        \t\t\t\t</li>\n        \t\t\t\t"})+'\n        \t\t\t\t<li role="separator" class="divider"></li>\n        \t\t\t\t':"")+'\n        \t\t\t\t<li class="dropdown-header">[[modules:chat.options]]</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="members"><i class="fa fa-fw fa-cog"></i> [[modules:chat.manage-room]]</a>\n        \t\t\t\t</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="rename"><i class="fa fa-fw fa-edit"></i> [[modules:chat.rename-room]]</a>\n        \t\t\t\t</li>\n        \t\t\t\t<li>\n        \t\t\t\t\t<a href="#" data-action="leave"><i class="fa fa-fw fa-sign-out"></i> [[modules:chat.leave]]</a>\n        \t\t\t\t</li>\n        \t\t\t</ul>\n                </li>\n                <li data-action="pop-out">\n                    <i class="fa fa-compress"></i>\n                </li>\n            </ul>\n\n            <span class="members">\n    \t\t\t[[modules:chat.chatting_with]]:\n    \t\t\t'+t.blocks.users(a,n,o,s,e)+'\n    \t\t</span>\n        </div>\n\n        <ul class="lv-body chat-content">\n            '+t.blocks.messages(a,n,o,s,e)+'\n        </ul>\n\n        <div component="chat/composer" class="lv-footer ms-reply">\n            <textarea component="chat/input" placeholder="[[modules:chat.placeholder]]" class="chat-input" '+(o(n&&n.canReply)?"":"readonly")+'></textarea>\n            <button data-action="send" '+(o(n&&n.canReply)?"":"disabled")+'><i class="fa fa-send"></i></button>\n            <span component="chat/message/remaining">'+a.__escape(o(n&&n.maximumChatMessageLength))+"</span>\n        </div>\n    </div>\n</div>\n":'\n<div>\n    <div class="listview lv-message">\n        <div class="lv-header-alt clearfix">\n            <div id="ms-menu-trigger" class="">\n                <div class="line-wrap">\n                    <div class="line top"></div>\n                    <div class="line center"></div>\n                    <div class="line bottom"></div>\n                </div>\n            </div>\n        </div>\n        <ul class="lv-body chat-content">\n        <div class="alert alert-info">\n            [[modules:chat.no-messages]]\n        </div>\n        </ul>\n    </div>\n</div>\n')+"\n        </div>\n    </div>\n</div>"}return t.blocks={messages:function(a,n,o,s,e){return s(o(n&&n.messages),function(s,e,t){return'\n<li component="chat/message" class="lv-item media'+(o(n&&n.messages&&n.messages[s]&&n.messages[s].self)?" right":"")+'" data-index="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].index))+'" data-mid="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].messageId))+'" data-uid="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].fromuid))+'" data-self="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].self))+'" data-break="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].newSet))+'" data-timestamp="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].timestamp))+'">\n    <div class="lv-avatar '+(o(n&&n.messages&&n.messages[s]&&n.messages[s].self)?"pull-right":"pull-left")+'">\n        '+(o(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser.picture)?'\n        <img class="user-avatar" src="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser.picture))+'">\n        ':'\n        <div class="user-icon" style="background-color: '+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser["icon:bgColor"]))+';">'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].fromUser&&n.messages[s].fromUser["icon:text"]))+"</div>\n        ")+"\n    </div>\n    "+(o(n&&n.messages&&n.messages[s]&&n.messages[s].newSet)?'\n    <div><small class="ms-date"><i class="fa fa-clock-o"></i> <span class="chat-timestamp timeago" title="'+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].timestampISO))+'"></span></small></div>\n    ':"")+'\n    <div class="media-body">\n        <div component="chat/message/body" class="ms-item">\n            '+(o(n&&n.messages&&n.messages[s]&&n.messages[s].edited)?'\n            <small class="text-muted chat-edit" title="[[global:edited]] '+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].editedISO))+'"><i class="fa fa-edit"></i></span></small>\n            ':"")+"\n\n            "+(o(n&&n.config&&n.config.disableChatMessageEditing)?"":"\n            "+(o(n&&n.messages&&n.messages[s]&&n.messages[s].self)?'\n            <div class="chat-controls">\n                <button class="btn btn-xs btn-link" data-action="edit"><i class="fa fa-pencil"></i></button>\n                <button class="btn btn-xs btn-link" data-action="delete"><i class="fa fa-times"></i></button>\n            </div>\n            ':"")+"\n            ")+"\n            "+a.__escape(o(n&&n.messages&&n.messages[s]&&n.messages[s].content))+"\n        </div>\n    </div>\n</li>\n"})},users:function(a,n,o,s,e){return s(o(n&&n.users),function(s,e,t){return'\n    \t\t\t<a href="'+a.__escape(o(n&&n.config&&n.config.relative_path))+"/uid/"+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s].uid))+'">'+a.__escape(o(n&&n.users&&n.users[s]&&n.users[s].username))+"</a>"+(e!==t-1?",":"")+"\n    \t\t\t"})},rooms:function(a,n,o,s,e){return s(o(n&&n.rooms),function(s,e,t){return'\n                <li component="chat/recent/room" data-roomid="'+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomId))+'" class="lv-item media '+(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].unread)?"unread":"")+'">\n    '+(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.uid)?'\n\t<div class="lv-avatar pull-left" data-username="'+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.username))+'" data-uid="'+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.uid))+'">\n\t\t'+(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.picture)?'\n\t\t<img class="user-avatar" src="'+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.picture))+'">\n\t\t':'\n\t\t<div class="user-icon" style="background-color: '+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser["icon:bgColor"]))+';">'+a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser["icon:text"]))+"</div>\n\t\t")+"\n\t</div>\n\n    ":"\n    [[modules:chat.no-users-in-room]]\n    ")+'\n    <div class="media-body">\n        <span component="chat/title" class="lv-title">'+(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomName)?a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomName)):a.__escape(o(n&&n.rooms&&n.rooms[s]&&n.rooms[s].usernames)))+"</span>\n    </div>\n</li>\n                "})},breadcrumbs:function(a,n,o,s,e){return s(o(n&&n.breadcrumbs),function(s,e,t){return"\n\t<li"+(e===t-1?' component="breadcrumb/current"':"")+' itemscope="itemscope" itemtype="http://data-vocabulary.org/Breadcrumb" '+(e===t-1?'class="active"':"")+">\n\t\t"+(e!==t-1?'<a href="'+a.__escape(o(n&&n.breadcrumbs&&n.breadcrumbs[s]&&n.breadcrumbs[s].url))+'" itemprop="url">':"")+'\n\t\t\t<span itemprop="title">\n\t\t\t\t'+a.__escape(o(n&&n.breadcrumbs&&n.breadcrumbs[s]&&n.breadcrumbs[s].text))+"\n\t\t\t\t"+(e===t-1?"\n\t\t\t\t"+(o(n&&n["feeds:disableRSS"])?"":"\n\t\t\t\t"+(o(n&&n.rssFeedUrl)?'<a target="_blank" href="'+a.__escape(o(n&&n.rssFeedUrl))+'"><i class="fa fa-rss-square"></i></a>':""))+"\n\t\t\t\t":"")+"\n\t\t\t</span>\n\t\t"+(e!==t-1?"</a>":"")+"\n\t</li>\n\t"})}},t});