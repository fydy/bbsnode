{"version":3,"sources":["public/src/modules/postSelect.js"],"names":["define","components","PostSelect","onSelect","pids","init","_onSelect","length","$","on","onPostClicked","disableClicksOnPosts","togglePostSelection","this","disable","forEach","pid","get","toggleClass","off","enableClicksOnPosts","post","newPid","attr","parseInt","index","indexOf","push","splice","sort","a","b","disableClicks"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KACJ,IAAIC,EAEJD,EAAWE,QAEXF,EAAWG,KAAO,SAAUC,GAC3BJ,EAAWE,KAAKG,OAAS,EACzBJ,EAAWG,EACXE,EAAE,YAAYC,GAAG,QAAS,yCAA0CC,GACpEC,KAGD,SAASD,IACRR,EAAWU,oBAAoBJ,EAAEK,OAGlCX,EAAWY,QAAU,WACpBZ,EAAWE,KAAKW,QAAQ,SAAUC,GACjCf,EAAWgB,IAAI,OAAQ,MAAOD,GAAKE,YAAY,aAAc,SAG9DV,EAAE,YAAYW,IAAI,QAAS,yCAA0CT,GACrEU,KAGDlB,EAAWU,oBAAsB,SAAUS,GAC1C,IAAIC,EAASD,EAAKE,KAAK,YAEvB,GAAIC,SAASH,EAAKE,KAAK,cAAe,MAAQ,EAAG,CAChD,OAGD,GAAID,EAAQ,CACX,IAAIG,EAAQvB,EAAWE,KAAKsB,QAAQJ,GACpC,GAAIG,KAAW,EAAG,CACjBvB,EAAWE,KAAKuB,KAAKL,GACrBD,EAAKH,YAAY,aAAc,UACzB,CACNhB,EAAWE,KAAKwB,OAAOH,EAAO,GAC9BJ,EAAKH,YAAY,aAAc,OAGhC,GAAIhB,EAAWE,KAAKG,OAAQ,CAC3BL,EAAWE,KAAKyB,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,IAEnD,UAAW5B,IAAa,WAAY,CACnCA,OAMH,SAAS6B,IACR,OAAO,MAGR,SAASrB,IACRH,EAAE,YAAYC,GAAG,QAAS,kDAAmDuB,GAG9E,SAASZ,IACRZ,EAAE,YAAYW,IAAI,QAAS,kDAAmDa,GAG/E,OAAO9B","file":"public/src/modules/postSelect.js","sourcesContent":["'use strict';\n\n\ndefine('postSelect', ['components'], function (components) {\n\tvar PostSelect = {};\n\tvar onSelect;\n\n\tPostSelect.pids = [];\n\n\tPostSelect.init = function (_onSelect) {\n\t\tPostSelect.pids.length = 0;\n\t\tonSelect = _onSelect;\n\t\t$('#content').on('click', '[component=\"topic\"] [component=\"post\"]', onPostClicked);\n\t\tdisableClicksOnPosts();\n\t};\n\n\tfunction onPostClicked() {\n\t\tPostSelect.togglePostSelection($(this));\n\t}\n\n\tPostSelect.disable = function () {\n\t\tPostSelect.pids.forEach(function (pid) {\n\t\t\tcomponents.get('post', 'pid', pid).toggleClass('bg-success', false);\n\t\t});\n\n\t\t$('#content').off('click', '[component=\"topic\"] [component=\"post\"]', onPostClicked);\n\t\tenableClicksOnPosts();\n\t};\n\n\tPostSelect.togglePostSelection = function (post) {\n\t\tvar newPid = post.attr('data-pid');\n\n\t\tif (parseInt(post.attr('data-index'), 10) === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (newPid) {\n\t\t\tvar index = PostSelect.pids.indexOf(newPid);\n\t\t\tif (index === -1) {\n\t\t\t\tPostSelect.pids.push(newPid);\n\t\t\t\tpost.toggleClass('bg-success', true);\n\t\t\t} else {\n\t\t\t\tPostSelect.pids.splice(index, 1);\n\t\t\t\tpost.toggleClass('bg-success', false);\n\t\t\t}\n\n\t\t\tif (PostSelect.pids.length) {\n\t\t\t\tPostSelect.pids.sort(function (a, b) { return a - b; });\n\t\t\t}\n\t\t\tif (typeof onSelect === 'function') {\n\t\t\t\tonSelect();\n\t\t\t}\n\t\t}\n\t};\n\n\n\tfunction disableClicks() {\n\t\treturn false;\n\t}\n\n\tfunction disableClicksOnPosts() {\n\t\t$('#content').on('click', '[component=\"post\"] button, [component=\"post\"] a', disableClicks);\n\t}\n\n\tfunction enableClicksOnPosts() {\n\t\t$('#content').off('click', '[component=\"post\"] button, [component=\"post\"] a', disableClicks);\n\t}\n\n\treturn PostSelect;\n});\n"]}