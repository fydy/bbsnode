{"version":3,"sources":["public/src/modules/categorySearch.js"],"names":["define","categorySearch","init","el","utils","isTouchDevice","searchEl","find","length","categoryEls","on","updateList","val","toLowerCase","noMatch","each","liEl","$","this","isMatch","attr","indexOf","toggleClass","addClass","removeClass","ev","preventDefault","stopPropagation","focus","off"],"mappings":"AAAA,aAEAA,OAAO,iBAAkB,WACxB,IAAIC,KAEJA,EAAeC,KAAO,SAAUC,GAC/B,GAAIC,MAAMC,gBAAiB,CAC1B,OAED,IAAIC,EAAWH,EAAGI,KAAK,0CACvB,IAAKD,EAASE,OAAQ,CACrB,OAED,IAAIC,EAAcN,EAAGI,KAAK,0CAC1BJ,EAAGO,GAAG,mBAAoB,WACzB,SAASC,IACR,IAAIC,EAAMN,EAASC,KAAK,SAASK,MAAMC,cACvC,IAAIC,EAAU,KACdL,EAAYM,KAAK,WAChB,IAAIC,EAAOC,EAAEC,MACb,IAAIC,EAAUH,EAAKI,KAAK,aAAaP,cAAcQ,QAAQT,MAAU,EACrE,GAAIE,GAAWK,EAAS,CACvBL,EAAU,MAEXE,EAAKM,YAAY,UAAWH,KAG7BhB,EAAGI,KAAK,iEAAiEe,YAAY,UAAWR,GAEjGX,EAAGI,KAAK,oBAAoBgB,SAAS,UACrCjB,EAASkB,YAAY,UAAUd,GAAG,QAAS,SAAUe,GACpDA,EAAGC,iBACHD,EAAGE,oBAEJrB,EAASC,KAAK,SAASK,IAAI,IAAIgB,QAAQlB,GAAG,QAASC,GACnDA,MAGDR,EAAGO,GAAG,mBAAoB,WACzBP,EAAGI,KAAK,oBAAoBiB,YAAY,UACxClB,EAASiB,SAAS,UAAUM,IAAI,SAChCvB,EAASC,KAAK,SAASsB,IAAI,YAI7B,OAAO5B","file":"public/src/modules/categorySearch.js","sourcesContent":["'use strict';\n\ndefine('categorySearch', function () {\n\tvar categorySearch = {};\n\n\tcategorySearch.init = function (el) {\n\t\tif (utils.isTouchDevice()) {\n\t\t\treturn;\n\t\t}\n\t\tvar searchEl = el.find('[component=\"category-selector-search\"]');\n\t\tif (!searchEl.length) {\n\t\t\treturn;\n\t\t}\n\t\tvar categoryEls = el.find('[component=\"category/list\"] [data-cid]');\n\t\tel.on('show.bs.dropdown', function () {\n\t\t\tfunction updateList() {\n\t\t\t\tvar val = searchEl.find('input').val().toLowerCase();\n\t\t\t\tvar noMatch = true;\n\t\t\t\tcategoryEls.each(function () {\n\t\t\t\t\tvar liEl = $(this);\n\t\t\t\t\tvar isMatch = liEl.attr('data-name').toLowerCase().indexOf(val) !== -1;\n\t\t\t\t\tif (noMatch && isMatch) {\n\t\t\t\t\t\tnoMatch = false;\n\t\t\t\t\t}\n\t\t\t\t\tliEl.toggleClass('hidden', !isMatch);\n\t\t\t\t});\n\n\t\t\t\tel.find('[component=\"category/list\"] [component=\"category/no-matches\"]').toggleClass('hidden', !noMatch);\n\t\t\t}\n\t\t\tel.find('.dropdown-toggle').addClass('hidden');\n\t\t\tsearchEl.removeClass('hidden').on('click', function (ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\t\t\t});\n\t\t\tsearchEl.find('input').val('').focus().on('keyup', updateList);\n\t\t\tupdateList();\n\t\t});\n\n\t\tel.on('hide.bs.dropdown', function () {\n\t\t\tel.find('.dropdown-toggle').removeClass('hidden');\n\t\t\tsearchEl.addClass('hidden').off('click');\n\t\t\tsearchEl.find('input').off('keyup');\n\t\t});\n\t};\n\n\treturn categorySearch;\n});\n"]}