"use strict";define("composer/categoryList",["categorySelector"],function(e){var t={};var r;t.init=function(t,i){var c=t.find(".category-list-container");if(!c.length){return}t.on("action:composer.resize",function(){a(t)});socket.emit("plugins.composer.getCategoriesForSelect",{},function(n,s){if(n){return app.alertError(n.message)}s.forEach(function(e){if(!e.disabledClass){$('<li data-cid="'+e.cid+'">'+e.name+"</li>").translateText(e.name).appendTo($(".category-selector"))}});app.parseAndTranslate("partials/category-selector",{categories:s,pullRight:true},function(n){c.append(n);r=e.init(c.find('[component="category-selector"]'),function(e){if(i.hasOwnProperty("cid")){o(t,i,e.cid)}$("[tabindex="+(parseInt($(this).attr("tabindex"),10)+1)+"]").trigger("focus")});if(i.cid){r.selectCategory(i.cid)}var s=r.getSelectedCategory();$(".category-name").translateText(s?s.name:"[[modules:composer.select_category]]");$(".category-selector").find('li[data-cid="'+i.cid+'"]').addClass("active");a(t)})});$(".category-selector").on("click","li",function(){$(".category-name").text($(this).text());$(".category-selector").removeClass("open");$(".category-selector li").removeClass("active");$(this).addClass("active");var e=$(this).attr("data-cid");r.selectCategory(e);if(i.hasOwnProperty("cid")){o(t,i,e)}})};function a(e){e.find('.category-list-container [component="category-selector"]').toggleClass("dropup",e.outerHeight()<$(window).height()/2)}t.getSelectedCid=function(){var e;if(r){e=r.getSelectedCategory()}return e?e.cid:0};function o(e,t,r){t.cid=r;require(["composer/tags"],function(a){a.onChangeCategory(e,t,r)})}return t});
//# sourceMappingURL=categoryList.js.map