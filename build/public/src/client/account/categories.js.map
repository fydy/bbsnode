{"version":3,"sources":["public/src/client/account/categories.js"],"names":["define","header","Categories","init","ajaxify","data","categories","forEach","category","handleIgnoreWatch","cid","$","find","on","$this","this","state","attr","socket","emit","uid","err","modified_cids","app","alertError","message","toggleClass","alertSuccess"],"mappings":"AAAA,aAGAA,OAAO,4BAA6B,wBAAyB,SAAUC,GACtE,IAAIC,KAEJA,EAAWC,KAAO,WACjBF,EAAOE,OAEPC,QAAQC,KAAKC,WAAWC,QAAQ,SAAUC,GACzCC,EAAkBD,EAASE,QAI7B,SAASD,EAAkBC,GAC1B,IAAIF,EAAWG,EAAE,cAAgBD,EAAM,MACvCF,EAASI,KAAK,wGAAwGC,GAAG,QAAS,WACjI,IAAIC,EAAQH,EAAEI,MACd,IAAIC,EAAQF,EAAMG,KAAK,cAEvBC,OAAOC,KAAK,4BAA8BT,IAAKA,EAAKM,MAAOA,EAAOI,IAAKhB,QAAQC,KAAKe,KAAO,SAAUC,EAAKC,GACzG,GAAID,EAAK,CACR,OAAOE,IAAIC,WAAWH,EAAII,SAG3BH,EAAcf,QAAQ,SAAUG,GAC/B,IAAIF,EAAWG,EAAE,cAAgBD,EAAM,MACvCF,EAASI,KAAK,wCAAwCc,YAAY,SAAUV,IAAU,YACtFR,EAASI,KAAK,yCAAyCc,YAAY,WAAYV,IAAU,YAEzFR,EAASI,KAAK,2CAA2Cc,YAAY,SAAUV,IAAU,eACzFR,EAASI,KAAK,4CAA4Cc,YAAY,WAAYV,IAAU,eAE5FR,EAASI,KAAK,wCAAwCc,YAAY,SAAUV,IAAU,YACtFR,EAASI,KAAK,yCAAyCc,YAAY,WAAYV,IAAU,cAG1FO,IAAII,aAAa,cAAgBX,EAAQ,kBAK5C,OAAOd","file":"public/src/client/account/categories.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/categories', ['forum/account/header'], function (header) {\n\tvar Categories = {};\n\n\tCategories.init = function () {\n\t\theader.init();\n\n\t\tajaxify.data.categories.forEach(function (category) {\n\t\t\thandleIgnoreWatch(category.cid);\n\t\t});\n\t};\n\n\tfunction handleIgnoreWatch(cid) {\n\t\tvar category = $('[data-cid=\"' + cid + '\"]');\n\t\tcategory.find('[component=\"category/watching\"], [component=\"category/ignoring\"], [component=\"category/notwatching\"]').on('click', function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar state = $this.attr('data-state');\n\n\t\t\tsocket.emit('categories.setWatchState', { cid: cid, state: state, uid: ajaxify.data.uid }, function (err, modified_cids) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\n\t\t\t\tmodified_cids.forEach(function (cid) {\n\t\t\t\t\tvar category = $('[data-cid=\"' + cid + '\"]');\n\t\t\t\t\tcategory.find('[component=\"category/watching/menu\"]').toggleClass('hidden', state !== 'watching');\n\t\t\t\t\tcategory.find('[component=\"category/watching/check\"]').toggleClass('fa-check', state === 'watching');\n\n\t\t\t\t\tcategory.find('[component=\"category/notwatching/menu\"]').toggleClass('hidden', state !== 'notwatching');\n\t\t\t\t\tcategory.find('[component=\"category/notwatching/check\"]').toggleClass('fa-check', state === 'notwatching');\n\n\t\t\t\t\tcategory.find('[component=\"category/ignoring/menu\"]').toggleClass('hidden', state !== 'ignoring');\n\t\t\t\t\tcategory.find('[component=\"category/ignoring/check\"]').toggleClass('fa-check', state === 'ignoring');\n\t\t\t\t});\n\n\t\t\t\tapp.alertSuccess('[[category:' + state + '.message]]');\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Categories;\n});\n"]}